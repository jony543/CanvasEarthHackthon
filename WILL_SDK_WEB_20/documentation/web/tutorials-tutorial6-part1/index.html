<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 7) & !(IE 8)]><!-->
<html lang="en-US">
<!--<![endif]-->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>Composing strokes | WILL SDK Docs</title>
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="http://localhost/will_docs_instance1/xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="http://localhost/will_docs_instance1/wp-content/themes/will-doc/js/html5.js"></script>
	<![endif]-->

	<link rel="stylesheet" href="../../wp-content/themes/will-doc/css/style.css">
	<link rel="stylesheet" href="../../wp-content/themes/will-doc/css/accordionmenu.css">

	<script src="../../wp-content/themes/will-doc/js/jquery.min.js"></script>
	<script src="../../wp-content/themes/will-doc/js/sidebar.js"></script>

	<link rel="stylesheet" href="../../wp-content/themes/will-doc/css/highlight.css">
	<script src="../../wp-content/themes/will-doc/js/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
</head>

<body>
	<header>
		<div class="title">
			<div>WILL &trade;</div>
			<div>sdk documentation</div>
		</div>
		<!--
		<div id="searchbox">
			<input class="typeahead" type="text" placeholder="{{ search_text }}">
		</div>
-->
	</header>

	<div id="sitewrapper">
<div id="sidebar">
	<nav class="accordion">

				<h1 class="do-not-cause-collapse" title="General Concepts">

			General Concepts
			</h1>

							<div class="active-menu never-close">
					<h2 class="not-collapsible" title="Architectural Overview">

								<a href="../../general-concepts/architecture/index.html"
											>Architectural Overview</a>
					
			</h2>

						<h2 class="not-collapsible" title="Generating ink content">

								<a href="../../general-concepts/path-building/index.html"
											>Generating ink content</a>
					
			</h2>

						<h2 class="not-collapsible" title="Rendering ink content">

								<a href="../../general-concepts/rasterizer/index.html"
											>Rendering ink content</a>
					
			</h2>

						<h2 class="not-collapsible" title="Encoding and decoding ink content">

								<a href="../../general-concepts/serialization/index.html"
											>Encoding and decoding ink content</a>
					
			</h2>

						<h2 class="not-collapsible" title="Exchanging ink content">

								<a href="../../general-concepts/file-format/index.html"
											>Exchanging ink content</a>
					
			</h2>

							</div>
							<h1 title="Web SDK">

			Web SDK
			</h1>

							<div>
					<h2 title="Getting started">

								<a href="../getting-started/index.html"
											>Getting started</a>
					
			</h2>

						<h2 title="Release Notes">

								<a href="../release-notes/index.html"
											>Release Notes</a>
					
			</h2>

						<h2 title="Tutorials">

								<a href="../tutorials-overview/index.html"
											>Tutorials</a>
					
			</h2>

							<div>
					<h3 title="Tutorial 1: Drawing with pointing devices">

								<a href="../tutorials-tutorial1/index.html"
											>Tutorial 1: Drawing with pointing devices</a>
					
			</h3>

							<div>
					<h4 title="Part 1: Setting up the ink engine">

								<a href="../tutorials-tutorial1-part1/index.html"
											>Part 1: Setting up the ink engine</a>
					
			</h4>

						<h4 title="Part 2: Building paths from pointer input">

								<a href="../tutorials-tutorial1-part2/index.html"
											>Part 2: Building paths from pointer input</a>
					
			</h4>

						<h4 title="Part 3: Smoothing paths">

								<a href="../tutorials-tutorial1-part3/index.html"
											>Part 3: Smoothing paths</a>
					
			</h4>

						<h4 title="Part 4: Drawing preliminary paths">

								<a href="../tutorials-tutorial1-part4/index.html"
											>Part 4: Drawing preliminary paths</a>
					
			</h4>

						<h4 title="Part 5: Drawing semi-transparent strokes">

								<a href="../tutorials-tutorial1-part5/index.html"
											>Part 5: Drawing semi-transparent strokes</a>
					
			</h4>

						<h4 title="Part 6: Using a particle brush">

								<a href="../tutorials-tutorial1-part6/index.html"
											>Part 6: Using a particle brush</a>
					
			</h4>

						<h4 title="Part 7: Generating a Bezier path">

								<a href="../tutorials-tutorial1-part7/index.html"
											>Part 7: Generating a Bezier path</a>
					
			</h4>

							</div>
							<h3 title="Tutorial 2: Encoding and decoding strokes">

								<a href="../tutorials-tutorial2/index.html"
											>Tutorial 2: Encoding and decoding strokes</a>
					
			</h3>

							<div>
					<h4 title="Part 1: Creating a stroke model">

								<a href="../tutorials-tutorial2-part1/index.html"
											>Part 1: Creating a stroke model</a>
					
			</h4>

						<h4 title="Part 2: Serializing and deserializing strokes">

								<a href="../tutorials-tutorial2-part2/index.html"
											>Part 2: Serializing and deserializing strokes</a>
					
			</h4>

							</div>
							<h3 title="Tutorial 3: Erasing strokes">

								<a href="../tutorials-tutorial3/index.html"
											>Tutorial 3: Erasing strokes</a>
					
			</h3>

							<div>
					<h4 title="Part 1: Creating an eraser">

								<a href="../tutorials-tutorial3-part1/index.html"
											>Part 1: Creating an eraser</a>
					
			</h4>

						<h4 title="Part 2: Erasing parts of strokes">

								<a href="../tutorials-tutorial3-part2/index.html"
											>Part 2: Erasing parts of strokes</a>
					
			</h4>

							</div>
							<h3 title="Tutorial 4: Selecting strokes">

								<a href="../tutorials-tutorial4/index.html"
											>Tutorial 4: Selecting strokes</a>
					
			</h3>

							<div>
					<h4 title="Part 1: Selecting strokes">

								<a href="../tutorials-tutorial4-part1/index.html"
											>Part 1: Selecting strokes</a>
					
			</h4>

						<h4 title="Part 2: Selecting parts of strokes">

								<a href="../tutorials-tutorial4-part2/index.html"
											>Part 2: Selecting parts of strokes</a>
					
			</h4>

							</div>
							<h3 title="Tutorial 5: Working with rasters">

								<a href="../tutorials-tutorial5/index.html"
											>Tutorial 5: Working with rasters</a>
					
			</h3>

							<div>
					<h4 title="Part 1: Displaying raster images">

								<a href="../tutorials-tutorial5-part1/index.html"
											>Part 1: Displaying raster images</a>
					
			</h4>

						<h4 title="Part 2: Creating image masks">

								<a href="../tutorials-tutorial5-part2/index.html"
											>Part 2: Creating image masks</a>
					
			</h4>

							</div>
							<h3 title="Tutorial 6: Collaborating in real time">

								<a href="../tutorials-tutorial6/index.html"
											>Tutorial 6: Collaborating in real time</a>
					
			</h3>

							<div>
					<h4 title="Part 1: Composing strokes">

								<a href="index.html"
						 class="selected"					>Part 1: Composing strokes</a>
					
			</h4>

						<h4 title="Part 2: Erasing strokes">

								<a href="../tutorials-tutorial6-part2/index.html"
											>Part 2: Erasing strokes</a>
					
			</h4>

						<h4 title="Part 3: Erasing parts of strokes">

								<a href="../tutorials-tutorial6-part3/index.html"
											>Part 3: Erasing parts of strokes</a>
					
			</h4>

						<h4 title="Part 4: Selecting strokes">

								<a href="../tutorials-tutorial6-part4/index.html"
											>Part 4: Selecting strokes</a>
					
			</h4>

						<h4 title="Part 5: Selecting parts of strokes">

								<a href="../tutorials-tutorial6-part5/index.html"
											>Part 5: Selecting parts of strokes</a>
					
			</h4>

						<h4 title="Part 6: Composing strokes with latency">

								<a href="../tutorials-tutorial6-part6/index.html"
											>Part 6: Composing strokes with latency</a>
					
			</h4>

							</div>
								</div>
							<h2 title="API Reference">

			API Reference
			</h2>

							<div>
					<h3 title="Classes">

			Classes
			</h3>

							<div>
					<h4 title="BezierPath">

								<a href="../../web-api/Module.BezierPath/index.html"
											>BezierPath</a>
					
			</h4>

						<h4 title="BrushDecoder">

								<a href="../../web-api/Module.BrushDecoder/index.html"
											>BrushDecoder</a>
					
			</h4>

						<h4 title="BrushEncoder">

								<a href="../../web-api/Module.BrushEncoder/index.html"
											>BrushEncoder</a>
					
			</h4>

						<h4 title="DirectBrush">

								<a href="../../web-api/Module.DirectBrush/index.html"
											>DirectBrush</a>
					
			</h4>

						<h4 title="FlatPath">

								<a href="../../web-api/Module.FlatPath/index.html"
											>FlatPath</a>
					
			</h4>

						<h4 title="GenericLayer">

								<a href="../../web-api/Module.GenericLayer/index.html"
											>GenericLayer</a>
					
			</h4>

						<h4 title="GenericPath">

								<a href="../../web-api/Module.GenericPath/index.html"
											>GenericPath</a>
					
			</h4>

						<h4 title="InkCanvas">

								<a href="../../web-api/Module.InkCanvas/index.html"
											>InkCanvas</a>
					
			</h4>

						<h4 title="InkDecoder">

								<a href="../../web-api/Module.InkDecoder/index.html"
											>InkDecoder</a>
					
			</h4>

						<h4 title="InkEncoder">

								<a href="../../web-api/Module.InkEncoder/index.html"
											>InkEncoder</a>
					
			</h4>

						<h4 title="Intersector">

								<a href="../../web-api/Module.Intersector/index.html"
											>Intersector</a>
					
			</h4>

						<h4 title="MultiChannelSmoothener">

								<a href="../../web-api/Module.MultiChannelSmoothener/index.html"
											>MultiChannelSmoothener</a>
					
			</h4>

						<h4 title="OffscreenLayer">

								<a href="../../web-api/Module.OffscreenLayer/index.html"
											>OffscreenLayer</a>
					
			</h4>

						<h4 title="ParticleBrush">

								<a href="../../web-api/Module.ParticleBrush/index.html"
											>ParticleBrush</a>
					
			</h4>

						<h4 title="PathBuilder">

								<a href="../../web-api/Module.PathBuilder/index.html"
											>PathBuilder</a>
					
			</h4>

						<h4 title="PathContext">

								<a href="../../web-api/Module.PathContext/index.html"
											>PathContext</a>
					
			</h4>

						<h4 title="PathOperationDecoder">

								<a href="../../web-api/Module.PathOperationDecoder/index.html"
											>PathOperationDecoder</a>
					
			</h4>

						<h4 title="PathOperationEncoder">

								<a href="../../web-api/Module.PathOperationEncoder/index.html"
											>PathOperationEncoder</a>
					
			</h4>

						<h4 title="PressurePathBuilder">

								<a href="../../web-api/Module.PressurePathBuilder/index.html"
											>PressurePathBuilder</a>
					
			</h4>

						<h4 title="SolidColorBrush">

								<a href="../../web-api/Module.SolidColorBrush/index.html"
											>SolidColorBrush</a>
					
			</h4>

						<h4 title="SpeedPathBuilder">

								<a href="../../web-api/Module.SpeedPathBuilder/index.html"
											>SpeedPathBuilder</a>
					
			</h4>

						<h4 title="Stroke">

								<a href="../../web-api/Module.Stroke/index.html"
											>Stroke</a>
					
			</h4>

						<h4 title="StrokeBrush">

								<a href="../../web-api/Module.StrokeBrush/index.html"
											>StrokeBrush</a>
					
			</h4>

						<h4 title="StrokeDrawContext">

								<a href="../../web-api/Module.StrokeDrawContext/index.html"
											>StrokeDrawContext</a>
					
			</h4>

						<h4 title="StrokeRenderer">

								<a href="../../web-api/Module.StrokeRenderer/index.html"
											>StrokeRenderer</a>
					
			</h4>

							</div>
							<h3 title="Interfaces">

			Interfaces
			</h3>

							<div>
					<h4 title="PathOperationDecoderCallbacksHandlerInterface">

								<a href="../../web-api/Module.PathOperationDecoderCallbacksHandlerInterface/index.html"
											>PathOperationDecoderCallbacksHandlerInterface</a>
					
			</h4>

							</div>
							<h3 title="Namespaces">

			Namespaces
			</h3>

							<div>
					<h4 title="Module">

								<a href="../../web-api/Module/index.html"
											>Module</a>
					
			</h4>

						<h4 title="Module.Color">

								<a href="../../web-api/Module.Color/index.html"
											>Module.Color</a>
					
			</h4>

						<h4 title="Module.GLTools">

								<a href="../../web-api/Module.GLTools/index.html"
											>Module.GLTools</a>
					
			</h4>

						<h4 title="Module.MatTools">

								<a href="../../web-api/Module.MatTools/index.html"
											>Module.MatTools</a>
					
			</h4>

						<h4 title="Module.RectTools">

								<a href="../../web-api/Module.RectTools/index.html"
											>Module.RectTools</a>
					
			</h4>

							</div>
							<h3 title="Global">

								<a href="../../web-api/global/index.html"
											>Global</a>
					
			</h3>

			
	</nav>
</div><div id="page_content" class='page-content tutorials web'>
	<div class="seealso"><h2>See Also</h2><p>For more information, see the following topics:</p><ul><li><a href="../../general-concepts/path-building/index.html">Generating ink content</a></li><li><a href="../../general-concepts/serialization/index.html">Encoding and decoding ink content</a></li><li><a href="../../general-concepts/file-format/index.html">Exchanging ink content</a></li><li><a href="../tutorials-tutorial1/index.html">Drawing with pointing devices</a></li></ul></div>
<div id="post-66" class="page">
	<h1>Collaborating in real time</h1>
<p>WILL allows multiple users to collaborate on a document in real time. In this tutorial, you will learn how to configure a document that multiple users can work on over the network.</p>
<h2>Part 1: Composing strokes</h2>
<p>In <a href="../tutorials-tutorial1/index.html">Tutorial 1: Drawing with pointing devices</a>, you defined the stroke composition process.
In Part 1 of this tutorial, you will update that process to enable multiple stroke creators and to transfer stroke data over the network.</p>
<h3>Step 1: Update the ink engine to allow for multiple stroke creators</h3>
<p>Update the ink engine initialization to initialize the <code>client</code> object.
Use the user ID of the client to create an instance of the <code>Writer</code> class, which identifies the stroke creator (you will create this class in step 5).</p>
<pre><code class="javascript">initInkEngine: function(width, height) {
    ...

    client.init();

    this.writer = new Writer(client.id);
    client.writers[client.id] = this.writer;

    this.clearCanvas();
},</code></pre>
<h3>Step 2: Extend the stroke composition methods to package and send the data</h3>
<p>In the ink engine initalization, extend the stroke composition process to package the stroke data and send it over the network.</p>
<p>The <code>client</code> object acts as router between the local canvas and the remote side, and the <code>server</code> object emulates the server behavior.
When communication with the server finishes, users can begin collaboration.</p>
<p><strong>Note:</strong> The <code>server</code> object does not pretend to be a real communication point, but it displays some of the collaboration problems that appear in this process.
This object is for illustrative purposes only and its implementation is not covered in this tutorial.</p>
<pre><code class="javascript">beginStroke: function(e) {
    ...

    client.encoder.encodeComposeStyle(this.writer.strokeRenderer);
    client.send();
},

endStroke: function(e) {
    ...

    client.encoder.encodeAdd([{
        brush: this.brush,
        path: this.path,
        width: this.writer.strokeRenderer.width,
        color: this.writer.strokeRenderer.color,
        ts: 0, tf: 1, randomSeed: 0,
        blendMode: this.writer.strokeRenderer.blendMode
    }]);
    client.send();
},

drawPath: function() {
    this.writer.compose(this.pathPart, this.writer.inputPhase == Module.InputPhase.End);
},</code></pre>
<h3>Step 3: Update the canvas clearing process</h3>
<p>Clearing the canvas is not a stroke operation. Implement it separately.</p>
<p>In this example, there are two methods: <code>clear</code> and <code>clearCanvas</code>. The <code>clearCanvas</code> method clears the local drawing surface immediately.
The <code>clear</code> method sends a command to the server that enters the server-controlled command chain and clears the drawing surface for all collaborators.</p>
<p>Define the two methods as follows:</p>
<pre><code class="javascript">clear: function() {
    parent.server.clear();
},

clearCanvas: function() {
    this.strokes = new Array();

    this.strokesLayer.clear(this.backgroundColor);
    this.canvas.clear(this.backgroundColor);
}</code></pre>
<p>The complete sample code for the ink engine configuration (steps 1-3) is as follows:</p>
<pre><code class="javascript">var WILL = {
    backgroundColor: Module.Color.WHITE,
    strokes: new Array(),

    init: function(width, height) {...},
    initInkEngine: function(width, height) {...},
    initEvents: function() {...},

    beginStroke: function(e) {
        ...

        client.encoder.encodeComposeStyle(this.writer.strokeRenderer);
        client.send();
    },

    moveStroke: function(e) {...},

    endStroke: function(e) {
        ...

        client.encoder.encodeAdd([{
            brush: this.brush,
            path: this.path,
            width: this.writer.strokeRenderer.width,
            color: this.writer.strokeRenderer.color,
            ts: 0, tf: 1, randomSeed: 0,
            blendMode: this.writer.strokeRenderer.blendMode
        }]);
        client.send();
    },

    buildPath: function(pos) {...},

    drawPath: function() {
        this.writer.compose(this.pathPart, this.writer.inputPhase == Module.InputPhase.End);
    },

    refresh: function(dirtyArea) {
        if (!dirtyArea) dirtyArea = this.canvas.bounds;
        dirtyArea = Module.RectTools.ceil(dirtyArea);

        this.canvas.clear(dirtyArea, this.backgroundColor);
        this.canvas.blend(this.strokesLayer, {rect: dirtyArea});
    },

    clear: function() {
        parent.server.clear();
    },

    clearCanvas: function() {
        this.strokes = new Array();

        this.strokesLayer.clear(this.backgroundColor);
        this.canvas.clear(this.backgroundColor);
    }
};</code></pre>
<h3>Step 4: Initialize the environment</h3>
<p>Initalize the environment and implement the <code>Module.InkDecoder.getStrokeBrush</code> method.
This is an abstract method of the <code>Module.InkDecoder</code> class and is used from the <code>Module.PathOperationDecoder</code> class when a stroke brush is required.</p>
<p>To initialize the environment, add the following code:</p>
<pre><code class="javascript">var env = {
    width: top.document.getElementById(window.name).scrollWidth,
    height: top.document.getElementById(window.name).scrollHeight
};

Module.addPostScript(function() {
    Module.InkDecoder.getStrokeBrush = function(paint, writer) {
        return WILL.brush;
    }

    WILL.init(env.width, env.height);
});</code></pre>
<p><strong>Note:</strong> The <code>paint</code> parameter of the <code>Module.InkDecoder.getStrokeBrush</code> method is related to the <code>Module.BrushEncoder</code> and <code>Module.BrushDecoder</code> classes.
These classes are not covered in this tutorial.</p>
<h3>Step 5: Define a <code>Writer</code> constructor to identify stroke creators</h3>
<p>The person who creates a stroke is represented by an instance of the <code>Writer</code> class. For collaborative composition,
you need a list of all users that participate in the collaboration (that is, multiple instances of the <code>Writer</code> class).</p>
<p>Define a constructor called <code>Writer</code> that will identify the user who created a stroke, as follows:</p>
<pre><code class="javascript">function Writer(id) {
    this.id = id;

    this.strokeRenderer = new Module.StrokeRenderer(WILL.canvas);
    this.strokeRenderer.configure({brush: WILL.brush, color: ((id == 0)?Module.Color.BLUE:Module.Color.GREEN)});
}

Writer.prototype.refresh = function() {
    if (this.id == client.id &amp;&amp; this.inputPhase == Module.InputPhase.Move)
        this.strokeRenderer.drawPreliminary(WILL.preliminaryPathPart);

    WILL.canvas.clear(this.strokeRenderer.updatedArea, WILL.backgroundColor);
    WILL.canvas.blend(WILL.strokesLayer, {rect: this.strokeRenderer.updatedArea});

    this.strokeRenderer.blendUpdatedArea();
}

Writer.prototype.compose = function(path, endStroke) {
    if (path.points.length == 0)
        return;

    this.strokeRenderer.draw(path, endStroke, this.id != client.id);

    if (this.id == client.id) {
        if (this.strokeRenderer.updatedArea)
            this.refresh();

        if (endStroke)
            delete this.inputPhase;

        client.encoder.encodeComposePathPart(path, this.strokeRenderer.color, true, false, endStroke);
        client.send();
    }
}

Writer.prototype.abort = function() {
    var dirtyArea = Module.RectTools.union(this.strokeRenderer.strokeBounds, this.strokeRenderer.preliminaryDirtyArea);

    this.strokeRenderer.abort();
    delete this.inputPhase;

    WILL.refresh(dirtyArea);

    if (this.id == client.id) {
        client.encoder.encodeComposeAbort();
        client.send();
    }
}</code></pre>
<h3>Step 6: Send the data through the network</h3>
<p>You learned how to compose strokes in <a href="../tutorials-tutorial1/index.html">Tutorial 1: Drawing with pointing devices</a>.
In a collaborative scenario, when a composition event occurs, you should send this data through the network. In this example, the <code>client</code> object routes data packages as follows:</p>
<pre><code class="javascript">var client = {
    name: window.name,
    writers: [],

    init: function() {
        this.id = parent.server.getSessionID(this.name);

        this.encoder = new Module.PathOperationEncoder();
        this.decoder = new Module.PathOperationDecoder(Module.PathOperationDecoder.getPathOperationDecoderCallbacksHandler(this.callbacksHandlerImplementation));
    },

    send: function(compose) {
        parent.server.recieve(this.id, Module.readBytes(this.encoder.getBytes()), compose);
        this.encoder.reset();
    },

    recieve: function(sender, data) {
        var writer = this.writers[sender];

        if (!writer) {
            writer = new Writer(sender);
            this.writers[sender] = writer;
        }

        Module.writeBytes(data, function(int64Ptr) {
            this.decoder.decode(writer, int64Ptr);
        }, this);
    },

    callbacksHandlerImplementation: {
        onComposeStyle: function(writer, style) {
            if (writer.id == client.id) return;
            writer.strokeRenderer.configure(style);
        },

        onComposePathPart: function(writer, path, endStroke) {
            if (writer.id == client.id) return;

            writer.compose(path, endStroke);
            writer.refresh();
        },

        onComposeAbort: function(writer) {
            if (writer.id == client.id) return;
            writer.abort();
        },

        onAdd: function(writer, strokes) {
            strokes.forEach(function(stroke) {
                WILL.strokes.push(stroke);
                writer.strokeRenderer.blendStroke(WILL.strokesLayer, stroke.blendMode);
            }, this);

            WILL.refresh();
        },

        onRemove: function(writer, group) {},

        onUpdateColor: function(writer, group, color) {},

        onUpdateBlendMode: function(writer, group, blendMode) {},

        onSplit: function(writer, splits) {},

        onTransform: function(writer, group, mat) {}
    }
};</code></pre>
<p>The <code>client</code> object handles network communication. In its <code>init</code> method, it makes a handshake with the server.</p>
<p>The <code>encoder</code> object is an instance of the <a href="../../web-api/Module.PathOperationEncoder/index.html">Module.PathOperationEncoder</a> class. It is responsible for data encoding.</p>
<p>The <code>decoder</code> object is an instance of the <a href="../../web-api/Module.PathOperationDecoder/index.html">Module.PathOperationDecoder</a> class. It is responsible for data decoding.</p>
<p>The first argument of the <code>decoder</code> object's constructor is an implementation of the <a href="../../web-api/Module.PathOperationDecoderCallbacksHandlerInterface/index.html">Module.PathOperationDecoderCallbacksHandlerInterface</a> interface.
The <a href="../../web-api/Module.PathOperationDecoder/index.html">Module.PathOperationDecoder.getPathOperationDecoderCallbacksHandler</a> method converts the implementation to a typed instance.
You should implement all methods of the interface.</p>
<p>The <code>send</code> function reads bytes from the encoder and sends data over the network. At the end of this method, reset it because you need to start a new encoding process on the next encode.</p>
<p>The <code>recieve</code> function processes remote data. When a new collaborator accesses the canvas, a new instance of the <code>Writer</code> class is created for that collaborator.
This object is the user that all callback functions receive as a first parameter.</p>
<p>The <code>callbacksHandlerImplementation</code> method contains the implementation needed for the callback handler. This example demonstrates the implementation needed for composition only.</p>
<p>The <code>encodeComposeStyle</code> method adds configuration to the encoder. The <code>onComposeStyle</code> method configures the remote user's instance of the <code>strokeRenderer</code> class.</p>
<p>The <code>encodeComposePathPart</code> method adds a path part to the encoder and the <code>onComposePathPart</code> method processes the input from a remote user.</p>
<p>The <code>encodeComposeAbort</code> method adds an abort operation and the <code>onComposeAbort</code> method aborts remote user input for the current stroke.</p>
<p>The <code>encodeAdd</code> method adds a completed stroke path to the encoder and the <code>onAdd</code> method receives new strokes and the results of composition.</p>
<p>The <code>getBytes</code> call in the <code>send</code> method reads encoded data and resets the encoder to be ready for the next addition.</p>
<p>The <code>WILL.refresh</code> method applies changes to the canvas.</p>
<p>Conflict detection and conflict resolution are not applicable in this example because latency is ignored. In a real application, the correct appliance of completed strokes is very important.
In <a href="../tutorials-tutorial6-part6/index.html">Part 6</a> of this tutorial, you will have the opportunity to create conflict and resolve it.</p>
<p><strong>Note:</strong> For the sake of clarity, method implementations from earlier in this tutorial are replaced with <code>...</code> in the example code above.</p>
<h2>View sample</h2>
<ul>
<li><a href="http://localhost/will_docs_instance1/web/tutorials/Sample6/part1.js">View complete source code</a></li>
<li><a href="../tutorials/Sample6/Part1.html">View sample</a></li>
</ul>
<h2>Next steps</h2>
<p>At this point, you can continue with this tutorial.</p>
</div> <!-- page -->
			<nav class="prev-next-page">
									<a href="../tutorials-tutorial6-part2/index.html" class="next-page">Erasing strokes &raquo;</a>
								</nav>
			</div> <!-- page_content -->

	</div><!-- #sitewrapper -->

	<footer>
		<img src="../../wp-content/themes/will-doc/images/img_logo_wacom.png" alt="" />
<!--
		<span>&nbsp;</span>
		<a href="/contact.html">Contact</a>
		<a href="/support.html">Support</a>
-->
	</footer>
</body>
</html>